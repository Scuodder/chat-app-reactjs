{"version":3,"sources":["Message.js","MessageList.js","NewRoomForm.js","RoomList.js","SendMessageForm.js","LoginForm.js","App.js","config.js","index.js"],"names":["Message","props","react_default","a","createElement","className","username","text","MessageList","this","roomId","messages","map","element","index","src_Message","key","senderId","React","Component","NewRoomForm","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","room","handleChange","bind","assertThisInitialized","handleSubmit","event","setState","target","value","preventDefault","createRoom","onSubmit","type","onChange","placeholder","required","id","RoomList","sortedRooms","toConsumableArray","rooms","sort","b","active","href","onClick","subscribeToRoom","name","SendMessageForm","message","submitHandler","sendMessage","disabled","LoginForm","input","login","App","joinableRooms","joinedRooms","isLoggedIn","connection","getRooms","userId","_this2","Chatkit","ChatManager","instanceLocator","tokenProvider","TokenProvider","url","connect","then","currentUser","catch","err","console","log","_this3","getJoinableRooms","_this4","hooks","onMessage","concat","roomName","_this5","src_NewRoomForm","src_SendMessageForm","src_MessageList","src_RoomList","src_LoginForm","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"+PAaeA,MAXf,SAAiBC,GAEb,OACIC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBAAf,IAAoCJ,EAAMK,SAA1C,KACAJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAf,IAAgCJ,EAAMM,KAAtC,OCsBGC,mLAxBP,OAAKC,KAAKR,MAAMS,OAaZR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACVI,KAAKR,MAAMU,SAASC,IAAI,SAACC,EAASC,GAC/B,OACIZ,EAAAC,EAAAC,cAACW,EAAD,CAASC,IAAKF,EAAOR,SAAUO,EAAQI,SAAUV,KAAMM,EAAQN,UAdxEL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACVH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAf,gCALMa,IAAMC,WCyCjBC,cAxCX,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAb,KAAAW,IACVC,EAAAC,OAAAE,EAAA,EAAAF,CAAAb,KAAAa,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAAjB,QACKkB,MAAQ,CACTC,KAAM,IAEVP,EAAKQ,aAAeR,EAAKQ,aAAaC,KAAlBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KACpBA,EAAKW,aAAeX,EAAKW,aAAaF,KAAlBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KANVA,4EASAY,GACVxB,KAAKyB,SAAS,CACVN,KAAOK,EAAME,OAAOC,6CAIfH,GACTA,EAAMI,iBACN5B,KAAKR,MAAMqC,WAAW7B,KAAKkB,MAAMC,MACjCnB,KAAKyB,SAAS,CACVN,KAAO,sCAKX,OACI1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACXH,EAAAC,EAAAC,cAAA,QAAMmC,SAAU9B,KAAKuB,cACjB9B,EAAAC,EAAAC,cAAA,SACIoC,KAAK,OACLC,SAAYhC,KAAKoB,aACjBO,MAAO3B,KAAKkB,MAAMC,KAClBc,YAAY,kBACZC,UAAQ,IACZzC,EAAAC,EAAAC,cAAA,UAAQwC,GAAG,kBAAkBJ,KAAK,UAAlC,cAnCMtB,IAAMC,WC6BjB0B,mLA5BF,IAAAxB,EAAAZ,KAGCqC,EAAcxB,OAAAyB,EAAA,EAAAzB,CAAIb,KAAKR,MAAM+C,OAAOC,KAAK,SAAC9C,EAAE+C,GAAH,OAAS/C,EAAEyC,GAAKM,EAAEN,KACjE,OACI1C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACfH,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,UACK0C,EAAYlC,IAAI,SAACgB,GACd,IAAMuB,EAAS9B,EAAKpB,MAAMS,SAAWkB,EAAKgB,GAAK,UAAY,GAC3D,OACI1C,EAAAC,EAAAC,cAAA,MAAIY,IAAKY,EAAKgB,GAAIvC,UAAW,OAAS8C,GAClCjD,EAAAC,EAAAC,cAAA,KACIgD,KAAK,IACLC,QAAY,WAAOhC,EAAKpB,MAAMqD,gBAAgB1B,EAAKgB,MAFvD,KAIGhB,EAAK2B,KAJR,iBAbLrC,IAAMC,WCgDdqC,cA7CX,SAAAA,IAAc,IAAAnC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAb,KAAA+C,IACVnC,EAAAC,OAAAE,EAAA,EAAAF,CAAAb,KAAAa,OAAAG,EAAA,EAAAH,CAAAkC,GAAA9B,KAAAjB,QACKkB,MAAQ,CACT8B,QAAU,IAEdpC,EAAKQ,aAAeR,EAAKQ,aAAaC,KAAlBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KACpBA,EAAKqC,cAAgBrC,EAAKqC,cAAc5B,KAAnBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KANXA,4EASDY,GAETxB,KAAKyB,SAAS,CACVuB,QAAUxB,EAAME,OAAOC,8CAIjBH,GACVA,EAAMI,iBAEN5B,KAAKR,MAAM0D,YAAYlD,KAAKkB,MAAM8B,SAClChD,KAAKyB,SAAS,CACVuB,QAAS,sCAMb,OAEIvD,EAAAC,EAAAC,cAAA,QACImC,SAAY9B,KAAKiD,cACjBrD,UAAU,qBACNH,EAAAC,EAAAC,cAAA,SACIwD,SAAUnD,KAAKR,MAAM2D,SACrBpB,KAAK,OACLE,YAAY,kCACZD,SAAYhC,KAAKoB,aACjBO,MAAQ3B,KAAKkB,MAAM8B,kBAvCbvC,IAAMC,WCwCrB0C,cAxCX,SAAAA,IAAc,IAAAxC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAb,KAAAoD,IACVxC,EAAAC,OAAAE,EAAA,EAAAF,CAAAb,KAAAa,OAAAG,EAAA,EAAAH,CAAAuC,GAAAnC,KAAAjB,QACKkB,MAAQ,CACTmC,MAAQ,IAEZzC,EAAKQ,aAAeR,EAAKQ,aAAaC,KAAlBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KACpBA,EAAKW,aAAeX,EAAKW,aAAaF,KAAlBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KANVA,4EASDY,GACTxB,KAAKyB,SAAS,CACV4B,MAAQ7B,EAAME,OAAOC,6CAIhBH,GACTA,EAAMI,iBACN5B,KAAKR,MAAM8D,MAAMtD,KAAKkB,MAAMmC,OAC5BrD,KAAKyB,SAAS,CAAC4B,MAAQ,sCAIvB,OACI5D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,QAAMmC,SAAU9B,KAAKuB,cACjB9B,EAAAC,EAAAC,cAAA,SACIoC,KAAK,OACLJ,MAAO3B,KAAKkB,MAAMmC,MAClBpB,YAAc,+BACdD,SAAYhC,KAAKoB,wBA9BjBX,IAAMC,WCuIf6C,qBA7Hb,SAAAA,IAAc,IAAA3C,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAb,KAAAuD,IACZ3C,EAAAC,OAAAE,EAAA,EAAAF,CAAAb,KAAAa,OAAAG,EAAA,EAAAH,CAAA0C,GAAAtC,KAAAjB,QACKkB,MAAQ,CACXhB,SAAU,GACVsD,cAAgB,GAChBC,YAAc,GACdxD,OAAS,KAETyD,YAAY,GAId9C,EAAK+C,WAAa/C,EAAK+C,WAAWtC,KAAhBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KAClBA,EAAKsC,YAActC,EAAKsC,YAAY7B,KAAjBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KACnBA,EAAKiC,gBAAkBjC,EAAKiC,gBAAgBxB,KAArBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KACvBA,EAAKgD,SAAWhD,EAAKgD,SAASvC,KAAdR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KAChBA,EAAKiB,WAAajB,EAAKiB,WAAWR,KAAhBR,OAAAS,EAAA,EAAAT,QAAAS,EAAA,EAAAT,CAAAD,KAhBNA,0EAsBHiD,GAAQ,IAAAC,EAAA9D,KACG,IAAI+D,IAAQC,YAAY,CAC1CC,gBCjCkB,8CDkClBJ,OAAQA,EACRK,cAAe,IAAIH,IAAQI,cAAc,CACrCC,ICtCV,kHD0CgBC,UACTC,KAAK,SAACC,GACHT,EAAKS,YAAcA,EACnBT,EAAKF,WACLE,EAAKrC,SAAS,CACZiC,YAAa,MAIlBc,MAAM,SAACC,GACNC,QAAQC,IAAIF,yCAIN3E,GAEVE,KAAKuE,YAAYrB,YAAY,CAC3BpD,KAAOA,EACPG,OAAQD,KAAKkB,MAAMjB,4CAIZ,IAAA2E,EAAA5E,KACTA,KAAKuE,YAAYM,mBACdP,KAAM,SAAAd,GACLoB,EAAKnD,SAAS,CACZ+B,cAAgBA,EAChBC,YAAcmB,EAAKL,YAAYhC,UAGlCiC,MAAM,SAAAC,GAAQC,QAAQC,IAAIF,6CAGfxE,GAAQ,IAAA6E,EAAA9E,KACtBA,KAAKyB,SAAS,CAACvB,SAAW,KAC1BF,KAAKuE,YAAY1B,gBAAgB,CAC/B5C,OAAQA,EACR8E,MAAO,CACHC,UAAW,SAAChC,GAER8B,EAAKrD,SAAS,CACZvB,SAAQ,GAAA+E,OAAApE,OAAAyB,EAAA,EAAAzB,CAAMiE,EAAK5D,MAAMhB,UAAjB,CAA2B8C,UAK9CsB,KAAK,SAAAnD,GACJ2D,EAAKlB,WACLkB,EAAKrD,SAAS,CACZxB,OAASkB,EAAKgB,OAGjBqC,MAAM,SAAAC,GAAQC,QAAQC,IAAI,iCAAkCF,wCAGpDS,GAAU,IAAAC,EAAAnF,KACnBA,KAAKuE,YAAY1C,WAAW,CAC1BiB,KAAOoC,IAENZ,KAAK,SAACnD,GACHgE,EAAKtC,gBAAgB1B,EAAKgB,MAE7BqC,MAAO,SAACC,GAAUC,QAAQC,IAAI,gCAAiCF,sCAKhE,OAAKzE,KAAKkB,MAAMwC,WASZjE,EAAAC,EAAAC,cAAA,OAAKC,UAAW,OACdH,EAAAC,EAAAC,cAACyF,EAAD,CAAavD,WAAc7B,KAAK6B,aAChCpC,EAAAC,EAAAC,cAAC0F,EAAD,CACElC,UAAWnD,KAAKkB,MAAMjB,OACtBiD,YAAclD,KAAKkD,cACrBzD,EAAAC,EAAAC,cAAC2F,EAAD,CACErF,OAAUD,KAAKkB,MAAMjB,OACrBC,SAAaF,KAAKkB,MAAMhB,WAC1BT,EAAAC,EAAAC,cAAC4F,EAAD,CACEtF,OAAUD,KAAKkB,MAAMjB,OACrB4C,gBAAmB7C,KAAK6C,gBACxBN,MAAK,GAAA0C,OAAApE,OAAAyB,EAAA,EAAAzB,CAAQb,KAAKkB,MAAMsC,eAAnB3C,OAAAyB,EAAA,EAAAzB,CAAqCb,KAAKkB,MAAMuC,iBAlBzDhE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAC6F,EAAD,CAAWlC,MAAOtD,KAAK2D,qBAvGjBlD,IAAMC,YELxB+E,IAASC,OAAOjG,EAAAC,EAAAC,cAACgG,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.69d128ab.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Message(props) {\n\n    return (\n        <div className=\"message\">\n            <div className=\"message-username\"> {props.username} </div>\n            <div className=\"message-text\"> {props.text} </div>\n        </div>\n    )    \n\n}\n\nexport default Message ","import React from 'react'\nimport Message from './Message.js'\n\nclass MessageList extends React.Component {\n    render() {\n        if (!this.props.roomId) {\n            return (\n               <div className=\"message-list\">\n                    <div className=\"join-room\">\n                       Join any room &rarr; \n                    </div>\n               </div> \n            )\n            \n\n        }\n\n        return (\n            <div className=\"message-list\">\n                {this.props.messages.map((element, index) => {\n                    return (\n                        <Message key={index} username={element.senderId} text={element.text} />\n                    )\n                })}\n            </div>\n        )\n    }\n}\n\nexport default MessageList","import React from 'react'\n\nclass NewRoomForm extends React.Component {\n\n    constructor() {\n        super();\n        this.state = {\n            room: ''\n        }\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n    \n    handleChange (event) {\n        this.setState({\n            room : event.target.value\n        })\n    }\n\n    handleSubmit(event) {\n        event.preventDefault()\n        this.props.createRoom(this.state.room)\n        this.setState({\n            room : ''\n        })\n    }\n\n    render () {\n        return (\n            <div className=\"new-room-form\">\n                <form onSubmit={this.handleSubmit}>\n                    <input\n                        type=\"text\"\n                        onChange = {this.handleChange}\n                        value={this.state.room} \n                        placeholder=\"Create New Room\" \n                        required />\n                    <button id=\"create-room-btn\" type=\"submit\">+</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default NewRoomForm","import React from 'react' ;\n\nclass RoomList extends React.Component{\n    render() {\n        // console.log(this.props.rooms)\n\n        const sortedRooms = [...this.props.rooms].sort((a,b) => a.id - b.id ) \n        return (\n            <div className=\"rooms-list\">\n            <h3>ROOMS</h3>\n            <ul>\n                {sortedRooms.map((room) => {\n                    const active = this.props.roomId === room.id ? \" active\" : \"\"\n                    return (\n                        <li key={room.id} className={\"room\" + active}>\n                            <a \n                                href=\"#\" \n                                onClick = { () => {this.props.subscribeToRoom(room.id)} }\n                            >\n                            # {room.name} </a>\n                        </li>\n                    )\n                })}\n            </ul>\n                \n            \n            </div>\n        )\n    }\n}\n\nexport default RoomList ;","import React from 'react' ;\n\n\nclass SendMessageForm extends React.Component {\n\n    constructor() {\n        super() \n        this.state = {\n            message : ''\n        }\n        this.handleChange = this.handleChange.bind(this)\n        this.submitHandler = this.submitHandler.bind(this) \n    }\n\n    handleChange(event) {\n       \n        this.setState({\n            message : event.target.value\n        })\n    }\n\n    submitHandler(event) {\n        event.preventDefault()\n        // console.log(this.state.message) \n        this.props.sendMessage(this.state.message) \n        this.setState({\n            message: ''\n        })\n    }\n\n    render() {     \n        // console.log(this.state.message)\n        return (\n       \n            <form \n                onSubmit = {this.submitHandler}\n                className=\"send-message-form\">\n                    <input \n                        disabled={this.props.disabled}\n                        type=\"text\"\n                        placeholder=\"Type your message and hit enter\"  \n                        onChange = {this.handleChange}\n                        value ={this.state.message}\n                    /> \n            </form>\n        )\n    }\n\n}\n\nexport default SendMessageForm ; ","import React from 'react' ; \n\nclass LoginForm extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            input : ''\n        }\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n\n    handleChange(event) {\n        this.setState({\n            input : event.target.value \n        })\n    }\n\n    handleSubmit(event) {\n        event.preventDefault()\n        this.props.login(this.state.input)\n        this.setState({input : ''})\n    }\n\n    render () {\n        return (\n            <div className=\"login-form\">\n                <form onSubmit={this.handleSubmit}>\n                    <input \n                        type=\"text\"\n                        value={this.state.input}\n                        placeholder = \"Enter username and hit Enter\"\n                        onChange = {this.handleChange}\n                    >\n                    </input>\n                </form>\n            </div>\n\n        )\n    }\n\n}\n\nexport default LoginForm ;","import React from 'react';\nimport Chatkit from '@pusher/chatkit-client'; \nimport { tokenUrl, instanceLocator } from './config.js' ;\nimport MessageList from './MessageList.js'\nimport NewRoomForm from './NewRoomForm.js'\nimport RoomList from './RoomList.js'\nimport SendMessageForm from './SendMessageForm.js'\nimport LoginForm from './LoginForm.js'\nimport './App.css';\n\nclass App extends React.Component{\n\n  constructor() {\n    super()\n    this.state = {\n      messages: [] ,\n      joinableRooms : [],\n      joinedRooms : [] ,\n      roomId : null,\n      // LoginName : '',\n      isLoggedIn :false\n      \n    }\n  \n    this.connection = this.connection.bind(this); \n    this.sendMessage = this.sendMessage.bind(this) \n    this.subscribeToRoom = this.subscribeToRoom.bind(this) \n    this.getRooms = this.getRooms.bind(this)\n    this.createRoom = this.createRoom.bind(this)\n  }\n\n\n\n\n  connection(userId) {\n    const chatManager = new Chatkit.ChatManager({\n      instanceLocator, \n      userId: userId,\n      tokenProvider: new Chatkit.TokenProvider({\n          url: tokenUrl \n      }) \n    }) \n\n    chatManager.connect()\n      .then((currentUser) => {\n          this.currentUser = currentUser \n          this.getRooms()\n          this.setState({\n            isLoggedIn : true \n          })\n                    \n      })\n      .catch((err) => {\n        console.log(err) ;\n    })\n  }\n\n  sendMessage(text) {\n\n    this.currentUser.sendMessage({\n      text : text , \n      roomId: this.state.roomId \n    }) \n  }         \n  \n  getRooms() {\n    this.currentUser.getJoinableRooms()\n      .then( joinableRooms => {\n        this.setState({\n          joinableRooms : joinableRooms ,\n          joinedRooms : this.currentUser.rooms\n        })\n      })\n      .catch(err => {console.log(err)})\n  }\n\n  subscribeToRoom(roomId) {\n    this.setState({messages : []})\n    this.currentUser.subscribeToRoom({\n      roomId: roomId,\n      hooks: {\n          onMessage: (message) => {\n              // console.log('message.text ', message.text) \n              this.setState({\n                messages: [...this.state.messages, message]  \n              })\n          }\n      } \n  })\n    .then(room => {\n      this.getRooms()\n      this.setState({\n        roomId : room.id \n      })\n    })\n    .catch(err => {console.log(\"error on subscribing to a room\", err)}) \n  }\n\n  createRoom(roomName) {\n    this.currentUser.createRoom({\n      name : roomName, \n    })\n      .then((room) => {\n          this.subscribeToRoom(room.id)\n      })\n      .catch( (err) => { console.log(\"error while creating new room\", err) } )\n  }\n\n  render() {\n      // console.log(this.state.isLoggedIn)\n      if (!this.state.isLoggedIn) {\n        return (\n          <div className=\"login-container\">\n            <LoginForm login={this.connection} />\n          </div>\n        )\n      }\n\n      return (\n          <div className =\"app\">\n            <NewRoomForm createRoom = {this.createRoom}/>\n            <SendMessageForm \n              disabled={!this.state.roomId}\n              sendMessage= {this.sendMessage} />\n            <MessageList \n              roomId = {this.state.roomId}\n              messages = { this.state.messages }/>\n            <RoomList\n              roomId = {this.state.roomId}\n              subscribeToRoom = {this.subscribeToRoom} \n              rooms = {[...this.state.joinableRooms, ...this.state.joinedRooms]}\n            />\n          </div>\n      )\n  }\n}\n\nexport default App;\n","const tokenUrl = \n\"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/e0d2449f-56a6-41e0-8335-e380bfcc6fc8/token\";\n\nconst instanceLocator = \"v1:us1:e0d2449f-56a6-41e0-8335-e380bfcc6fc8\" ;\n\n\nexport { tokenUrl, instanceLocator } ;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}